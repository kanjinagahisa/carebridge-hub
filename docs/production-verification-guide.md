# CareBridge Hub — 本番環境動作確認ガイド

本番URL（https://carebridge-hub.vercel.app）での動作確認を、項目ごとに手順を追って確認していきます。

## 📋 確認項目チェックリスト

### ✅ 1. 基本動作確認

#### 1-1. 本番URLにアクセスできる
- [ ] ブラウザで `https://carebridge-hub.vercel.app` にアクセス
- [ ] ページが正常に読み込まれる（エラーページが表示されない）
- [ ] URLが `/login` にリダイレクトされる（未ログイン時）

**確認方法:**
1. ブラウザのアドレスバーに `https://carebridge-hub.vercel.app` を入力
2. Enterキーを押す
3. ページが読み込まれ、ログイン画面が表示されることを確認

**期待される結果:**
- ✅ ページが正常に読み込まれる
- ✅ ログイン画面が表示される
- ✅ URLが `/login` になっている

---

#### 1-2. ログイン画面が表示される
- [ ] ロゴが正しく表示される
- [ ] 「介護・福祉向け情報共有アプリ」の説明文が表示される
- [ ] メールアドレス入力欄が表示される
- [ ] パスワード入力欄が表示される
- [ ] 「パスワードを表示する」チェックボックスが表示される
- [ ] 「ログイン」ボタンが表示される
- [ ] 「パスワードを忘れた方」リンクが表示される
- [ ] 「新規登録はこちら」リンクが表示される

**確認方法:**
1. ログイン画面の各要素が正しく表示されているか目視確認
2. レイアウトが崩れていないか確認

**期待される結果:**
- ✅ すべての要素が正しく表示される
- ✅ レイアウトが崩れていない
- ✅ ロゴが表示される（CareBridge Hub のロゴ）

---

#### 1-3. ブラウザコンソールにエラーがない
- [ ] ブラウザの開発者ツールを開く（F12 または 右クリック → 検証）
- [ ] Console タブを選択
- [ ] エラーメッセージ（赤色）が表示されていないことを確認

**確認方法:**
1. ブラウザで `F12` キーを押す（または右クリック → 「検証」）
2. 「Console」タブをクリック
3. 赤色のエラーメッセージがないことを確認

**期待される結果:**
- ✅ コンソールにエラーメッセージが表示されない
- ✅ 警告（黄色）も可能な限り少ない

**もしエラーが出ている場合:**
- エラーメッセージの内容をメモ
- `docs/deployment-vercel.md` の「トラブルシューティング」セクションを参照

---

### ✅ 2. 認証機能の確認

#### 2-1. ログイン動作
- [ ] 有効なメールアドレスとパスワードでログインできる
- [ ] 無効なメールアドレス/パスワードの場合、エラーメッセージが表示される
- [ ] ログイン中は「ログイン中...」と表示される

**確認方法:**
1. ログイン画面で、**本番Supabaseに登録済みの**メールアドレスとパスワードを入力
2. 「ログイン」ボタンをクリック
3. ログインが成功することを確認

**テスト用アカウント:**
- 本番Supabaseプロジェクトに登録済みのアカウントを使用してください
- もしアカウントがない場合は、先に新規登録を行ってください

**期待される結果:**
- ✅ ログインが成功する
- ✅ エラーメッセージが表示されない
- ✅ ログイン後、自動的に `/home` に遷移する

**もしログインできない場合:**
- メールアドレスとパスワードが正しいか確認
- 本番Supabaseプロジェクトにユーザーが登録されているか確認
- Vercelの環境変数（`NEXT_PUBLIC_SUPABASE_URL`、`NEXT_PUBLIC_SUPABASE_ANON_KEY`）が正しく設定されているか確認

---

#### 2-2. ログイン後に /home へ遷移
- [ ] ログイン成功後、自動的に `/home` に遷移する
- [ ] URLが `https://carebridge-hub.vercel.app/home` になっている
- [ ] ホーム画面が表示される

**確認方法:**
1. ログイン成功後、ブラウザのアドレスバーを確認
2. URLが `/home` になっていることを確認
3. ホーム画面（新着投稿一覧）が表示されることを確認

**期待される結果:**
- ✅ URLが `/home` になっている
- ✅ ホーム画面が表示される
- ✅ ログイン状態が維持されている（ページをリロードしてもログイン状態が保持される）

---

#### 2-3. ログアウト動作
- [ ] ログアウトボタンが表示される
- [ ] ログアウトボタンをクリックするとログアウトできる
- [ ] ログアウト後、ログイン画面に戻る

**確認方法:**
1. ログイン状態で、ログアウトボタンを探す（通常はメニュー画面やヘッダーにあります）
2. ログアウトボタンをクリック
3. ログイン画面に戻ることを確認

**期待される結果:**
- ✅ ログアウトが正常に動作する
- ✅ ログアウト後、ログイン画面（`/login`）に遷移する
- ✅ ログアウト後、再度ログインしないと `/home` にアクセスできない

---

### ✅ 3. 主要機能の確認

#### 3-1. ホーム画面（新着投稿）
- [ ] ホーム画面（`/home`）にアクセスできる
- [ ] 新着投稿の一覧が表示される（投稿がある場合）
- [ ] 投稿がない場合は「投稿がありません」などのメッセージが表示される
- [ ] ヘッダーに施設名が表示される

**確認方法:**
1. ログイン後、`/home` にアクセス
2. 新着投稿の一覧が表示されることを確認
3. ヘッダーに施設名が表示されることを確認

**期待される結果:**
- ✅ ホーム画面が正常に表示される
- ✅ 新着投稿が表示される（投稿がある場合）
- ✅ 施設名がヘッダーに表示される

---

#### 3-2. 利用者一覧・タイムライン
- [ ] 利用者一覧（`/clients`）にアクセスできる
- [ ] 利用者リストが表示される
- [ ] 利用者をクリックすると、利用者詳細ページに遷移する
- [ ] 利用者タイムライン（`/clients/[id]/timeline`）が表示される
- [ ] タイムラインに投稿が表示される（投稿がある場合）

**確認方法:**
1. ナビゲーションメニューから「利用者」をクリック（または `/clients` に直接アクセス）
2. 利用者一覧が表示されることを確認
3. 利用者を1つクリック
4. 利用者詳細ページが表示されることを確認
5. 「タイムライン」タブをクリック（または `/clients/[id]/timeline` に直接アクセス）
6. タイムラインが表示されることを確認

**期待される結果:**
- ✅ 利用者一覧が正常に表示される
- ✅ 利用者をクリックすると詳細ページに遷移する
- ✅ タイムラインが正常に表示される

---

#### 3-3. グループ一覧・タイムライン
- [ ] グループ一覧（`/groups`）にアクセスできる
- [ ] グループリストが表示される
- [ ] グループをクリックすると、グループタイムラインに遷移する
- [ ] グループタイムライン（`/groups/[id]`）が表示される
- [ ] タイムラインに投稿が表示される（投稿がある場合）

**確認方法:**
1. ナビゲーションメニューから「グループ」をクリック（または `/groups` に直接アクセス）
2. グループ一覧が表示されることを確認
3. グループを1つクリック
4. グループタイムラインが表示されることを確認

**期待される結果:**
- ✅ グループ一覧が正常に表示される
- ✅ グループをクリックするとタイムラインに遷移する
- ✅ グループタイムラインが正常に表示される

---

#### 3-4. 施設設定・招待機能
- [ ] 施設設定（`/settings/facility`）にアクセスできる（管理者のみ）
- [ ] 施設情報が表示される
- [ ] 施設情報を編集できる（管理者のみ）
- [ ] 招待機能（`/settings/facility/invite`）にアクセスできる（管理者のみ）
- [ ] 招待リンクが生成できる

**確認方法:**
1. 管理者アカウントでログイン
2. メニュー画面から「施設設定」をクリック（または `/settings/facility` に直接アクセス）
3. 施設情報が表示されることを確認
4. 「招待」タブをクリック（または `/settings/facility/invite` に直接アクセス）
5. 招待リンクが生成できることを確認

**期待される結果:**
- ✅ 施設設定画面が正常に表示される（管理者のみ）
- ✅ 施設情報が表示される
- ✅ 招待リンクが生成できる

**注意:**
- 一般ユーザーは施設設定にアクセスできない（403エラーなどが表示される）

---

### ✅ 4. UI要素の確認

#### 4-1. ロゴ表示
- [ ] ログイン画面にロゴが表示される
- [ ] ヘッダーにロゴが表示される（ログイン後）
- [ ] ロゴが正しく読み込まれている（画像が壊れていない）

**確認方法:**
1. ログイン画面でロゴが表示されることを確認
2. ログイン後、ヘッダーにロゴが表示されることを確認
3. ロゴの画像が正しく表示されているか確認

**期待される結果:**
- ✅ ロゴが正しく表示される
- ✅ ロゴの画像が壊れていない

---

#### 4-2. 施設名表示
- [ ] ホーム画面のヘッダーに施設名が表示される
- [ ] メニュー画面のヘッダーに施設名が表示される
- [ ] つながり画面のヘッダーに施設名が表示される

**確認方法:**
1. ログイン後、各画面のヘッダーを確認
2. 施設名が表示されることを確認

**期待される結果:**
- ✅ 各画面のヘッダーに施設名が表示される

---

#### 4-3. 利用規約・プライバシーポリシー表示
- [ ] 利用規約（`/terms`）にアクセスできる
- [ ] 利用規約の全文が表示される
- [ ] プライバシーポリシー（`/privacy`）にアクセスできる
- [ ] プライバシーポリシーの全文が表示される

**確認方法:**
1. ブラウザのアドレスバーに `https://carebridge-hub.vercel.app/terms` を入力
2. 利用規約が表示されることを確認
3. ブラウザのアドレスバーに `https://carebridge-hub.vercel.app/privacy` を入力
4. プライバシーポリシーが表示されることを確認

**期待される結果:**
- ✅ 利用規約が正常に表示される
- ✅ プライバシーポリシーが正常に表示される

---

### ✅ 5. メール送信機能の確認（オプション）

#### 5-1. パスワード再設定メール
- [ ] パスワード再設定画面（`/auth/forgot-password`）にアクセスできる
- [ ] メールアドレスを入力して送信できる
- [ ] パスワード再設定メールが送信される
- [ ] メール内のリンクをクリックすると、パスワード再設定画面に遷移する

**確認方法:**
1. ログイン画面で「パスワードを忘れた方」をクリック
2. メールアドレスを入力
3. 「送信」ボタンをクリック
4. メールが送信されることを確認（メールボックスを確認）
5. メール内のリンクをクリック
6. パスワード再設定画面に遷移することを確認

**期待される結果:**
- ✅ パスワード再設定メールが送信される
- ✅ メール内のリンクが正常に動作する

**注意:**
- メール送信機能を使用するには、Resend の環境変数（`RESEND_API_KEY`、`RESEND_FROM_EMAIL`）が設定されている必要があります

---

#### 5-2. パスワード変更完了メール
- [ ] パスワードを変更できる
- [ ] パスワード変更後、完了メールが送信される

**確認方法:**
1. パスワード再設定画面で新しいパスワードを設定
2. パスワード変更を完了
3. メールボックスを確認
4. パスワード変更完了メールが送信されることを確認

**期待される結果:**
- ✅ パスワード変更が正常に完了する
- ✅ パスワード変更完了メールが送信される

---

### ✅ 6. スマートフォン対応の確認

#### 6-1. iPhone/Androidでの表示確認
- [ ] iPhone でアクセスして、レイアウトが崩れていない
- [ ] Android でアクセスして、レイアウトが崩れていない
- [ ] フォームの入力が正常に動作する
- [ ] ボタンがタップしやすいサイズになっている

**確認方法:**
1. iPhone または Android のブラウザで `https://carebridge-hub.vercel.app` にアクセス
2. 各画面を確認
3. レイアウトが崩れていないか確認
4. フォームの入力が正常に動作するか確認

**期待される結果:**
- ✅ スマートフォンでレイアウトが崩れていない
- ✅ フォームの入力が正常に動作する
- ✅ ボタンがタップしやすい

**ブラウザの開発者ツールで確認する方法:**
1. デスクトップブラウザで `F12` を押す
2. デバイスツールバー（📱アイコン）をクリック
3. iPhone または Android を選択
4. 画面サイズを調整して確認

---

## 🎯 確認完了後のチェックリスト

すべての項目を確認したら、以下を確認してください：

- [ ] すべての基本動作確認項目が ✅
- [ ] すべての認証機能確認項目が ✅
- [ ] すべての主要機能確認項目が ✅
- [ ] すべてのUI要素確認項目が ✅
- [ ] メール送信機能が正常に動作する（オプション）
- [ ] スマートフォンで正常に表示される

---

## 🐛 問題が発生した場合

問題が発生した場合は、以下を確認してください：

1. **Vercel の環境変数設定**
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`

2. **Supabase 本番プロジェクトの設定**
   - データベーススキーマが適用されているか
   - RLS（Row Level Security）ポリシーが設定されているか
   - ユーザーが登録されているか

3. **ブラウザのコンソールエラー**
   - エラーメッセージの内容を確認
   - `docs/deployment-vercel.md` の「トラブルシューティング」セクションを参照

4. **Vercel のデプロイログ**
   - Vercel ダッシュボードの「Deployments」タブで、最新のデプロイログを確認
   - Build エラーがないか確認

---

## 📝 確認結果の記録

各項目を確認したら、チェックボックスに ✅ を付けて、確認日時と確認者を記録してください。

確認日時: _______________
確認者: _______________










